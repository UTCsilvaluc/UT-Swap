<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<main>
  <div id="demandes_pannel">
    <?php
            $login = "bazileel";
            $connect = DBCredential();
            $sqlSelectDemandes = "SELECT d.idDemande, d.codeUV, d.type, d.semaine, d.jour, d.horaireDebut, d.horaireFin, d.salle, (SELECT COUNT(*) FROM swap s WHERE (s.idDemande = d.idDemande or s.demandeur = d.idDemande) and statut > 0 ) as nbDemande, p.nom, p.prenom FROM demande d JOIN etudiant e ON e.login = d.login JOIN personne p ON p.login = e.login WHERE d.idDemande != ? and d.demande=1;";
    $stmtSelectDemandes = $connect->prepare($sqlSelectDemandes);
    $stmtSelectDemandes->bind_param("s", $login);

    $stmtSelectDemandes->execute();
    // Obtenir le résultat
    $resultat = $stmtSelectDemandes->get_result();

    // Vérifier s'il y a des résultats
    if ($resultat->num_rows > 0) {
    // Afficher les options du datalist

    while ($row = $resultat->fetch_assoc()) {
    $personne= ucfirst($row["nom"])." ".ucfirst($row["prenom"]);
    $row['semaine'] = ($row['semaine'] === 'null') ? null : $row['semaine'];
    echo '<div class="demande" data-row="' . htmlspecialchars(json_encode($row), ENT_QUOTES, 'UTF-8') . '" onclick="clickDemande(this)">';
    echo '<div class="demande_info1">';
      echo '<img src="../svg/demande_thing.svg">';
      echo '<div>';
        echo '<h1>'.$row["codeUV"].' - '.$row["type"] .'</h1>';
        echo '<h2>'.nombreEnJour($row["jour"]).'  '.date("H\hi", strtotime($row["horaireDebut"])).' - '.date("H\hi", strtotime($row["horaireFin"])).' | '.$row["salle"] .'</h2>';
        echo '</div>';
      echo '</div>';
    echo '<div class="demande_info2">';
      echo '<div>';
        echo '<p>Auteur: </p><p>'.$personne.'</p>';
        echo '</div>';
      echo '<div>';
        echo '<p>Demande(s):</p><p>'.$row["nbDemande"] .'</p>';
        echo '</div>';
      echo '</div>';
    echo '<img src="../svg/swap_icon.svg" onclick="copierLien(this)">';
    echo '</div>';

    }
    }

    ?>
  </div>
  <div id="others_demandes">
    <div id="demandes_top">
      <div class="demandes_top">
        <h1></h1>
        <hr>
      </div>
      <div class="demandes_content">
      </div>
      <div class="demandes_bottom">
        <button></button>
      </div>
    </div>
    <div id="demandes_bottom">
    </div>
  </div>
</main>

</body>
</html>

#demandes_pannel{
background-color: #dfdfdf;
width: 70%;
height: calc(85vh - var(--taille-header));
display: flex;
align-items: center;
flex-direction: column;
box-sizing: border-box;
padding:10px;
overflow-y: auto;
}

#others_demandes{
width: 20%;
height: calc(85vh - var(--taille-header));
display: flex;
flex-direction: column;
justify-content: space-between;
align-items: center;
background-color: red;
}

#others_demandes #demandes_top,#others_demandes #demandes_bottom{
width: 100%;
height: 48%;
background-color: blue;
}

.demande{
cursor: pointer;
font-family: 'Kantumruy';
display: flex;
align-items: center;
flex-direction: row;
justify-content: space-between;
width: 100%;
height: 10vh;
background-color: white;
border-radius: 20px;
}

.demande:not(:last-child){
margin-bottom: 10px;
}

.demande .demande_info1{
display: flex;
align-items: center;
flex-direction: row;
}

.demande .demande_info1 img{
cursor: auto;
display: flex;
align-items: center;
flex-direction: row;
margin-left: 20px;
margin-right: 20px;
}

.demande .demande_info1 div{
display: flex;
flex-direction: column;
justify-content: center;
}

.demande .demande_info1 div h1{
cursor: auto;
font-size: 20px;
color: black;
margin: 0
}

.demande .demande_info1 div h2{
cursor: auto;
font-size: 14px;
color: lightgray;
margin: 0
}

.demande .demande_info2 div{
display: flex;
align-items: center;
flex-direction: row;
}

.demande .demande_info2 div:first-child{
margin-bottom: 5px;
}

.demande .demande_info2 div p{
cursor: auto;
font-size: 14px;
margin: 0;
}

.demande .demande_info2 div p:first-child{
color: lightgray;
margin-right: 10px;
}


.demande img{
margin-right: 20px;
}

@keyframes bounce {
0%, 20%, 50%, 80%, 100% {
transform: scale(1);
}

40% {
transform: scale(0.98);
}

60% {
transform: scale(1.02);
}

90% {
transform: scale(0.997);
}
}


.bounce {
animation: bounce 0.6s ease infinite;
}