<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Example</title>
    <!-- Inclure CryptoJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <div class="header-content">
            <h1>Mon Site Web</h1>
            <button id="toggleNavButton">Menu</button>
            <nav class="nav">
                <ul>
                    <li><a href="#">Accueil</a></li>
                    <li><a href="#">À propos</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section>
            <h2>Section 1</h2>
            <p>Contenu de la section 1...</p>
        </section>

        <section>
            <h2>Section 2</h2>
            <p>Contenu de la section 2...</p>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Mon Site Web. Tous droits réservés.</p>
    </footer>

<script>
    
    
document.addEventListener('DOMContentLoaded', function () {
  const toggleNavButton = document.getElementById('toggleNavButton');
  const nav = document.querySelector('.nav');

  // Fonction pour afficher la navigation
  function showNav() {
    nav.style.display = 'block';
  }

  // Fonction pour masquer la navigation
  function hideNav() {
    nav.style.display = 'none';
  }

  // Gestionnaire d'événement pour le bouton de basculement
  toggleNavButton.addEventListener('click', function () {
    nav.style.display = nav.style.display === 'none' ? 'block' : 'none';
  });

  // Gestionnaire d'événement pour redimensionner l'écran
  window.addEventListener('resize', function () {
    // Si la largeur de l'écran est suffisamment grande, affiche la navigation
    if (window.innerWidth > 600) {
      showNav();
    }
  });

  // Au chargement initial, vérifie la largeur de l'écran et affiche/masque la navigation en conséquence
  if (window.innerWidth <= 600) {
    hideNav();
  } else {
    showNav();
  }
});


    // Fonction pour crypter les données
    function encryptData(data, key) {
        var encrypted = CryptoJS.AES.encrypt(data, key);
        return encrypted.toString();
    }

    // Fonction pour décrypter les données
    function decryptData(encryptedData, key) {
        var decrypted = CryptoJS.AES.decrypt(encryptedData, key);
        return decrypted.toString(CryptoJS.enc.Utf8);
    }

    // Fonction pour définir un cookie sécurisé
    function setSecureCookie(name, value, key) {
        // Crypter les données avant de les stocker
        var encryptedValue = encryptData(value, key);

        // Définir une date d'expiration (par exemple, 7 jours à partir de maintenant)
        var expirationDate = new Date();
        expirationDate.setDate(expirationDate.getDate() + 7);
        
        document.cookie = name + "=" + encodeURIComponent(encryptedValue) + "; expires=" + expirationDate.toUTCString();
    }

    // Fonction pour récupérer une valeur de cookie sécurisée
    function getSecureCookie(name, key) {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            if (cookie.indexOf(name + "=") === 0) {
                // Décrypter les données récupérées du cookie
                var encryptedValue = cookie.substring(name.length + 1);
                return decryptData(decodeURIComponent(encryptedValue), key);
            }
        }
        return null;
    }

    function generateRandomKey(length) {
        var charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_-+=<>?/{}[]";
        var key = "";
        for (var i = 0; i < length; i++) {
            var randomIndex = Math.floor(Math.random() * charset.length);
            key += charset.charAt(randomIndex);
        }
        return key;
    }

    // Fonction pour afficher le champ utilisateur et gérer les cookies
    function displayUserInputField() {
        var userInput = getSecureCookie("userInput", secretKey);

        if (userInput) {
            // Afficher la valeur du cookie s'il existe
            document.write("La valeur stockée dans le cookie est : " + userInput);
        } else {
            // Demander à l'utilisateur de saisir une valeur
            var userInput = prompt("Veuillez saisir une valeur :");
            
            // Stocker la valeur dans un cookie sécurisé
            setSecureCookie("userInput", userInput, secretKey);

            // Afficher la valeur du cookie
            document.write("La valeur que vous avez saisie est : " + userInput);
        }
    }

    // Clé secrète
    var secretKey = "test";

    // Appeler la fonction pour afficher le champ utilisateur
    displayUserInputField();
</script>

</body>
</html>